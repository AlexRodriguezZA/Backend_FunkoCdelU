{"{\"assumptions\":{},\"sourceRoot\":\"/home/alex/FunkoCdelU_App/ksdjidsjijdskodskoadsdas/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alex/FunkoCdelU_App/ksdjidsjijdskodskoadsdas\",\"filename\":\"/home/alex/FunkoCdelU_App/ksdjidsjijdskodskoadsdas/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alex/FunkoCdelU_App/ksdjidsjijdskodskoadsdas\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.19.3:development":{"value":{"code":"const express = require('express');\nconst {\n  postgraphile\n} = require('postgraphile');\nconst app = express();\nconst userDb = 'alex';\nconst userPass = 1234;\nconst host = 'localhost';\nconst database = 'BBDD_FunkoCdelU';\napp.use(postgraphile(`postgres://${userDb}:${userPass}@${host}/${database}` || \"postgres://postgres:postgres@127.0.0.1:5432/name-databases\", [\"public\"], {\n  watchPg: true,\n  graphiql: true,\n  enableCors: true,\n  enhanceGraphiql: true,\n  showErrorStack: true\n}));\nconst main = async () => {\n  const port = '3000';\n  await app.listen(port);\n  console.log(`Conectado pa http://localhost:3000/graphiql`);\n};\nmain();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInBvc3RncmFwaGlsZSIsImFwcCIsInVzZXJEYiIsInVzZXJQYXNzIiwiaG9zdCIsImRhdGFiYXNlIiwidXNlIiwid2F0Y2hQZyIsImdyYXBoaXFsIiwiZW5hYmxlQ29ycyIsImVuaGFuY2VHcmFwaGlxbCIsInNob3dFcnJvclN0YWNrIiwibWFpbiIsInBvcnQiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9hbGV4L0Z1bmtvQ2RlbFVfQXBwL2tzZGppZHNqaWpkc2tvZHNrb2Fkc2Rhcy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSAgcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgeyBwb3N0Z3JhcGhpbGUgfSA9IHJlcXVpcmUoJ3Bvc3RncmFwaGlsZScpO1xuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5jb25zdCB1c2VyRGIgPSAnYWxleCdcbmNvbnN0IHVzZXJQYXNzID0gMTIzNFxuY29uc3QgaG9zdCA9ICdsb2NhbGhvc3QnXG5jb25zdCBkYXRhYmFzZSA9ICdCQkREX0Z1bmtvQ2RlbFUnXG5cbmFwcC51c2UoXG4gICAgcG9zdGdyYXBoaWxlKFxuICAgICAgYHBvc3RncmVzOi8vJHt1c2VyRGJ9OiR7dXNlclBhc3N9QCR7aG9zdH0vJHtkYXRhYmFzZX1gIHx8IFwicG9zdGdyZXM6Ly9wb3N0Z3Jlczpwb3N0Z3Jlc0AxMjcuMC4wLjE6NTQzMi9uYW1lLWRhdGFiYXNlc1wiLFxuICAgICAgWyBcInB1YmxpY1wiXSxcbiAgICAgIHtcbiAgICAgICAgd2F0Y2hQZzogdHJ1ZSxcbiAgICAgICAgZ3JhcGhpcWw6IHRydWUsXG4gICAgICAgIGVuYWJsZUNvcnM6IHRydWUsXG4gICAgICAgIGVuaGFuY2VHcmFwaGlxbDogdHJ1ZSxcbiAgICAgICAgc2hvd0Vycm9yU3RhY2s6IHRydWVcbiAgICAgIH1cbiAgICApXG4gICk7XG4gIFxuY29uc3QgbWFpbiA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBwb3J0ID0gJzMwMDAnO1xuICAgIGF3YWl0IGFwcC5saXN0ZW4ocG9ydCk7XG4gICAgY29uc29sZS5sb2coYENvbmVjdGFkbyBwYSBodHRwOi8vbG9jYWxob3N0OjMwMDAvZ3JhcGhpcWxgKTtcbiAgfVxuICBcbm1haW4oKSJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFJQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ25DLE1BQU07RUFBRUM7QUFBYSxDQUFDLEdBQUdELE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDaEQsTUFBTUUsR0FBRyxHQUFHSCxPQUFPLEVBQUU7QUFFckIsTUFBTUksTUFBTSxHQUFHLE1BQU07QUFDckIsTUFBTUMsUUFBUSxHQUFHLElBQUk7QUFDckIsTUFBTUMsSUFBSSxHQUFHLFdBQVc7QUFDeEIsTUFBTUMsUUFBUSxHQUFHLGlCQUFpQjtBQUVsQ0osR0FBRyxDQUFDSyxHQUFHLENBQ0hOLFlBQVksQ0FDVCxjQUFhRSxNQUFPLElBQUdDLFFBQVMsSUFBR0MsSUFBSyxJQUFHQyxRQUFTLEVBQUMsSUFBSSw0REFBNEQsRUFDdEgsQ0FBRSxRQUFRLENBQUMsRUFDWDtFQUNFRSxPQUFPLEVBQUUsSUFBSTtFQUNiQyxRQUFRLEVBQUUsSUFBSTtFQUNkQyxVQUFVLEVBQUUsSUFBSTtFQUNoQkMsZUFBZSxFQUFFLElBQUk7RUFDckJDLGNBQWMsRUFBRTtBQUNsQixDQUFDLENBQ0YsQ0FDRjtBQUVILE1BQU1DLElBQUksR0FBRyxZQUFZO0VBQ3JCLE1BQU1DLElBQUksR0FBRyxNQUFNO0VBQ25CLE1BQU1aLEdBQUcsQ0FBQ2EsTUFBTSxDQUFDRCxJQUFJLENBQUM7RUFDdEJFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLDZDQUE0QyxDQUFDO0FBQzVELENBQUM7QUFFSEosSUFBSSxFQUFFIn0=","map":{"version":3,"names":["express","require","postgraphile","app","userDb","userPass","host","database","use","watchPg","graphiql","enableCors","enhanceGraphiql","showErrorStack","main","port","listen","console","log"],"sourceRoot":"/home/alex/FunkoCdelU_App/ksdjidsjijdskodskoadsdas/","sources":["index.js"],"sourcesContent":["const express =  require('express');\nconst { postgraphile } = require('postgraphile');\nconst app = express();\n\nconst userDb = 'alex'\nconst userPass = 1234\nconst host = 'localhost'\nconst database = 'BBDD_FunkoCdelU'\n\napp.use(\n    postgraphile(\n      `postgres://${userDb}:${userPass}@${host}/${database}` || \"postgres://postgres:postgres@127.0.0.1:5432/name-databases\",\n      [ \"public\"],\n      {\n        watchPg: true,\n        graphiql: true,\n        enableCors: true,\n        enhanceGraphiql: true,\n        showErrorStack: true\n      }\n    )\n  );\n  \nconst main = async () => {\n    const port = '3000';\n    await app.listen(port);\n    console.log(`Conectado pa http://localhost:3000/graphiql`);\n  }\n  \nmain()"],"mappings":"AAAA,MAAMA,OAAO,GAAIC,OAAO,CAAC,SAAS,CAAC;AACnC,MAAM;EAAEC;AAAa,CAAC,GAAGD,OAAO,CAAC,cAAc,CAAC;AAChD,MAAME,GAAG,GAAGH,OAAO,EAAE;AAErB,MAAMI,MAAM,GAAG,MAAM;AACrB,MAAMC,QAAQ,GAAG,IAAI;AACrB,MAAMC,IAAI,GAAG,WAAW;AACxB,MAAMC,QAAQ,GAAG,iBAAiB;AAElCJ,GAAG,CAACK,GAAG,CACHN,YAAY,CACT,cAAaE,MAAO,IAAGC,QAAS,IAAGC,IAAK,IAAGC,QAAS,EAAC,IAAI,4DAA4D,EACtH,CAAE,QAAQ,CAAC,EACX;EACEE,OAAO,EAAE,IAAI;EACbC,QAAQ,EAAE,IAAI;EACdC,UAAU,EAAE,IAAI;EAChBC,eAAe,EAAE,IAAI;EACrBC,cAAc,EAAE;AAClB,CAAC,CACF,CACF;AAEH,MAAMC,IAAI,GAAG,YAAY;EACrB,MAAMC,IAAI,GAAG,MAAM;EACnB,MAAMZ,GAAG,CAACa,MAAM,CAACD,IAAI,CAAC;EACtBE,OAAO,CAACC,GAAG,CAAE,6CAA4C,CAAC;AAC5D,CAAC;AAEHJ,IAAI,EAAE"}},"mtime":1665413951506},"{\"assumptions\":{},\"sourceRoot\":\"/home/alex/FunkoCdelU_App/Backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alex/FunkoCdelU_App/Backend\",\"filename\":\"/home/alex/FunkoCdelU_App/Backend/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alex/FunkoCdelU_App/Backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.19.3:development":{"value":{"code":"const express = require(\"express\");\nconst mercadopago = require(\"mercadopago\");\nconst {\n  postgraphile\n} = require(\"postgraphile\");\nconst userDb = \"alex\";\nconst userPass = 1234;\nconst host = \"localhost\";\nconst database = \"BBDD_Funko\";\nasync function ConfirmaCarrito(dni) {\n  const response = await fetch('http://localhost:5000/graphql', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      query: `mutation {\n              confirmarComprarDelCarrito(input: {dniUser: ${dni}}) {\n                clientMutationId\n              }\n            }\n            \n            `\n    })\n  });\n  const respuesta = await response.json();\n  console.log(respuesta);\n}\nasync function ConfirmaVenta(dni) {\n  const response = await fetch('http://localhost:5000/graphql', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      query: `mutation {\n              confirmarEstadoDeVenta(input: {dni: ${dni}}) {\n                clientMutationId\n              }\n            }\n            \n            `\n    })\n  });\n  const respuesta = await response.json();\n  console.log(respuesta);\n}\nasync function getDataUser(email) {\n  const response = await fetch('http://localhost:5000/graphql', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      query: `query MyQuery {\n              usuarioByEmail(email: \"${email}\") {\n                dni\n              }\n            }\n            \n            `\n    })\n  });\n  const respuesta = await response.json();\n  return respuesta.data.usuarioByEmail;\n}\n\n/*1Backend 2 ngrok=port 5000 */\nconst {\n  MySchemaCategoriasPlugins\n} = require(\"./Schemas/Categorias/Categorias.js\");\nconst app = express();\napp.post(\"/notificar\", async (req, res) => {\n  await notificar(req, res);\n});\nconst notificar = async (req, res) => {\n  try {\n    mercadopago.configure({\n      access_token: \"TEST-5873713881795945-030921-d57166b7b2e69778a0aee6a8bca9190b-1327386578\"\n    });\n    const {\n      query\n    } = req;\n    let payment;\n    const topic = query.topic || query.type;\n    if (topic == \"payment\") {\n      const paymentId = query.id || query[\"data.id\"];\n      payment = await mercadopago.payment.findById(paymentId);\n      console.log(payment);\n      const items = payment.body.additional_info.items;\n      const status = payment.body.status;\n      const email = payment.body.metadata.id_user;\n      console.log(status, paymentId);\n\n      /* TODO: Buscar como ver los pagos anteriores */\n      /*FUnciones bases de datos */\n      /*if (status === \"approved\") {\n       const data_user = await getDataUser(email)\n       console.log(data_user.dni)  \n       console.log(\"Carritoooo\")\n       await ConfirmaCarrito(data_user.dni)\n       console.log(\"VENTAAAAA\")   \n       await ConfirmaVenta(data_user.dni) \n      }\n      else{\n       console.log(\"Compra no aprovada\")\n      }\n      */\n\n      res.status(200);\n    } else {\n      res.status(400);\n    }\n  } catch (err) {\n    console.log(err);\n    return err;\n  }\n};\napp.use(postgraphile(`postgres://${userDb}:${userPass}@${host}/${database}` || \"postgres://postgres:postgres@127.0.0.1:5432/name-databases\", [\"public\"], {\n  watchPg: true,\n  graphiql: true,\n  enableCors: true,\n  enhanceGraphiql: true,\n  showErrorStack: true,\n  appendPlugins: [MySchemaCategoriasPlugins]\n}));\nconst main = async () => {\n  const port = 5000;\n  await app.listen(port);\n  console.log(`Conectado pa http://localhost:${port}/graphiql`);\n};\nmain();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIm1lcmNhZG9wYWdvIiwicG9zdGdyYXBoaWxlIiwidXNlckRiIiwidXNlclBhc3MiLCJob3N0IiwiZGF0YWJhc2UiLCJDb25maXJtYUNhcnJpdG8iLCJkbmkiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicXVlcnkiLCJyZXNwdWVzdGEiLCJqc29uIiwiY29uc29sZSIsImxvZyIsIkNvbmZpcm1hVmVudGEiLCJnZXREYXRhVXNlciIsImVtYWlsIiwiZGF0YSIsInVzdWFyaW9CeUVtYWlsIiwiTXlTY2hlbWFDYXRlZ29yaWFzUGx1Z2lucyIsImFwcCIsInBvc3QiLCJyZXEiLCJyZXMiLCJub3RpZmljYXIiLCJjb25maWd1cmUiLCJhY2Nlc3NfdG9rZW4iLCJwYXltZW50IiwidG9waWMiLCJ0eXBlIiwicGF5bWVudElkIiwiaWQiLCJmaW5kQnlJZCIsIml0ZW1zIiwiYWRkaXRpb25hbF9pbmZvIiwic3RhdHVzIiwibWV0YWRhdGEiLCJpZF91c2VyIiwiZXJyIiwidXNlIiwid2F0Y2hQZyIsImdyYXBoaXFsIiwiZW5hYmxlQ29ycyIsImVuaGFuY2VHcmFwaGlxbCIsInNob3dFcnJvclN0YWNrIiwiYXBwZW5kUGx1Z2lucyIsIm1haW4iLCJwb3J0IiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9hbGV4L0Z1bmtvQ2RlbFVfQXBwL0JhY2tlbmQvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5jb25zdCBtZXJjYWRvcGFnbyA9IHJlcXVpcmUoXCJtZXJjYWRvcGFnb1wiKVxuY29uc3QgeyBwb3N0Z3JhcGhpbGUgfSA9IHJlcXVpcmUoXCJwb3N0Z3JhcGhpbGVcIik7XG5cblxuY29uc3QgdXNlckRiID0gXCJhbGV4XCI7XG5jb25zdCB1c2VyUGFzcyA9IDEyMzQ7XG5jb25zdCBob3N0ID0gXCJsb2NhbGhvc3RcIjtcbmNvbnN0IGRhdGFiYXNlID0gXCJCQkREX0Z1bmtvXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIENvbmZpcm1hQ2Fycml0byhkbmkpIHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2dyYXBocWwnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgcXVlcnk6IGBtdXRhdGlvbiB7XG4gICAgICAgICAgICAgIGNvbmZpcm1hckNvbXByYXJEZWxDYXJyaXRvKGlucHV0OiB7ZG5pVXNlcjogJHtkbml9fSkge1xuICAgICAgICAgICAgICAgIGNsaWVudE11dGF0aW9uSWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBgXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgY29uc3QgcmVzcHVlc3RhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgY29uc29sZS5sb2cocmVzcHVlc3RhKVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIENvbmZpcm1hVmVudGEoZG5pKSB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9ncmFwaHFsJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHF1ZXJ5OiBgbXV0YXRpb24ge1xuICAgICAgICAgICAgICBjb25maXJtYXJFc3RhZG9EZVZlbnRhKGlucHV0OiB7ZG5pOiAke2RuaX19KSB7XG4gICAgICAgICAgICAgICAgY2xpZW50TXV0YXRpb25JZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGBcbiAgICAgIH0pLFxuICAgIH0pXG5cbiAgICBjb25zdCByZXNwdWVzdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICBjb25zb2xlLmxvZyhyZXNwdWVzdGEpXG5cbn1cblxuXG5hc3luYyBmdW5jdGlvbiBnZXREYXRhVXNlcihlbWFpbCkge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjUwMDAvZ3JhcGhxbCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBxdWVyeTogYHF1ZXJ5IE15UXVlcnkge1xuICAgICAgICAgICAgICB1c3VhcmlvQnlFbWFpbChlbWFpbDogXCIke2VtYWlsfVwiKSB7XG4gICAgICAgICAgICAgICAgZG5pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYFxuICAgICAgfSksXG4gICAgfSlcblxuICAgIGNvbnN0IHJlc3B1ZXN0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgIHJldHVybiByZXNwdWVzdGEuZGF0YS51c3VhcmlvQnlFbWFpbDtcblxufVxuXG5cbi8qMUJhY2tlbmQgMiBuZ3Jvaz1wb3J0IDUwMDAgKi9cbmNvbnN0IHtcbiAgTXlTY2hlbWFDYXRlZ29yaWFzUGx1Z2lucyxcbn0gPSByZXF1aXJlKFwiLi9TY2hlbWFzL0NhdGVnb3JpYXMvQ2F0ZWdvcmlhcy5qc1wiKTtcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuXG5cbmFwcC5wb3N0KFwiL25vdGlmaWNhclwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgYXdhaXQgbm90aWZpY2FyKHJlcSwgcmVzKTtcbn0pO1xuXG5jb25zdCBub3RpZmljYXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBtZXJjYWRvcGFnby5jb25maWd1cmUoe1xuICAgICAgYWNjZXNzX3Rva2VuOlxuICAgICAgICBcIlRFU1QtNTg3MzcxMzg4MTc5NTk0NS0wMzA5MjEtZDU3MTY2YjdiMmU2OTc3OGEwYWVlNmE4YmNhOTE5MGItMTMyNzM4NjU3OFwiLFxuICAgIH0pO1xuXG4gICAgY29uc3QgeyBxdWVyeSB9ID0gcmVxO1xuXG4gICAgbGV0IHBheW1lbnQ7XG5cbiAgICBjb25zdCB0b3BpYyA9IHF1ZXJ5LnRvcGljIHx8IHF1ZXJ5LnR5cGU7XG5cbiAgICBpZiAodG9waWMgPT0gXCJwYXltZW50XCIpIHtcbiAgICAgIGNvbnN0IHBheW1lbnRJZCA9IHF1ZXJ5LmlkIHx8IHF1ZXJ5W1wiZGF0YS5pZFwiXTtcbiAgICAgIHBheW1lbnQgPSBhd2FpdCBtZXJjYWRvcGFnby5wYXltZW50LmZpbmRCeUlkKHBheW1lbnRJZCk7XG5cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2cocGF5bWVudClcbiAgICAgIGNvbnN0IGl0ZW1zID0gcGF5bWVudC5ib2R5LmFkZGl0aW9uYWxfaW5mby5pdGVtcztcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHBheW1lbnQuYm9keS5zdGF0dXM7XG4gICAgICBjb25zdCBlbWFpbCA9IHBheW1lbnQuYm9keS5tZXRhZGF0YS5pZF91c2VyO1xuICAgICAgY29uc29sZS5sb2coc3RhdHVzLHBheW1lbnRJZClcbiAgICAgIFxuICAgICAgLyogVE9ETzogQnVzY2FyIGNvbW8gdmVyIGxvcyBwYWdvcyBhbnRlcmlvcmVzICovXG4gICAgICAgLypGVW5jaW9uZXMgYmFzZXMgZGUgZGF0b3MgKi9cbiAgICAgICAvKmlmIChzdGF0dXMgPT09IFwiYXBwcm92ZWRcIikge1xuICAgICAgICBjb25zdCBkYXRhX3VzZXIgPSBhd2FpdCBnZXREYXRhVXNlcihlbWFpbClcbiAgICAgICAgY29uc29sZS5sb2coZGF0YV91c2VyLmRuaSkgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIkNhcnJpdG9vb29cIilcbiAgICAgICAgYXdhaXQgQ29uZmlybWFDYXJyaXRvKGRhdGFfdXNlci5kbmkpXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVkVOVEFBQUFBXCIpICAgXG4gICAgICAgIGF3YWl0IENvbmZpcm1hVmVudGEoZGF0YV91c2VyLmRuaSkgXG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBjb25zb2xlLmxvZyhcIkNvbXByYSBubyBhcHJvdmFkYVwiKVxuICAgICAgfVxuICAgICAqL1xuICAgICAgXG4gICAgICByZXMuc3RhdHVzKDIwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgcmV0dXJuIGVycjtcbiAgfVxufTtcblxuYXBwLnVzZShcbiAgcG9zdGdyYXBoaWxlKFxuICAgIGBwb3N0Z3JlczovLyR7dXNlckRifToke3VzZXJQYXNzfUAke2hvc3R9LyR7ZGF0YWJhc2V9YCB8fFxuICAgICAgXCJwb3N0Z3JlczovL3Bvc3RncmVzOnBvc3RncmVzQDEyNy4wLjAuMTo1NDMyL25hbWUtZGF0YWJhc2VzXCIsXG4gICAgW1wicHVibGljXCJdLFxuICAgIHtcbiAgICAgIHdhdGNoUGc6IHRydWUsXG4gICAgICBncmFwaGlxbDogdHJ1ZSxcbiAgICAgIGVuYWJsZUNvcnM6IHRydWUsXG4gICAgICBlbmhhbmNlR3JhcGhpcWw6IHRydWUsXG4gICAgICBzaG93RXJyb3JTdGFjazogdHJ1ZSxcbiAgICAgIGFwcGVuZFBsdWdpbnM6IFtNeVNjaGVtYUNhdGVnb3JpYXNQbHVnaW5zXSxcbiAgICB9XG4gIClcbik7XG5cbmNvbnN0IG1haW4gPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHBvcnQgPSA1MDAwO1xuICBhd2FpdCBhcHAubGlzdGVuKHBvcnQpO1xuICBjb25zb2xlLmxvZyhgQ29uZWN0YWRvIHBhIGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fS9ncmFwaGlxbGApO1xufTtcblxubWFpbigpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsV0FBVyxHQUFHRCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQzFDLE1BQU07RUFBRUU7QUFBYSxDQUFDLEdBQUdGLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFHaEQsTUFBTUcsTUFBTSxHQUFHLE1BQU07QUFDckIsTUFBTUMsUUFBUSxHQUFHLElBQUk7QUFDckIsTUFBTUMsSUFBSSxHQUFHLFdBQVc7QUFDeEIsTUFBTUMsUUFBUSxHQUFHLFlBQVk7QUFFN0IsZUFBZUMsZUFBZSxDQUFDQyxHQUFHLEVBQUU7RUFDbEMsTUFBTUMsUUFBUSxHQUFHLE1BQU1DLEtBQUssQ0FBQywrQkFBK0IsRUFBRTtJQUMxREMsTUFBTSxFQUFFLE1BQU07SUFDZEMsT0FBTyxFQUFFO01BQ1AsY0FBYyxFQUFFO0lBQ2xCLENBQUM7SUFDREMsSUFBSSxFQUFFQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztNQUNqQkMsS0FBSyxFQUFHO0FBQ2xCLDREQUE0RFIsR0FBSTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0lBQ00sQ0FBQztFQUNILENBQUMsQ0FBQztFQUVGLE1BQU1TLFNBQVMsR0FBRyxNQUFNUixRQUFRLENBQUNTLElBQUksRUFBRTtFQUN2Q0MsT0FBTyxDQUFDQyxHQUFHLENBQUNILFNBQVMsQ0FBQztBQUUxQjtBQUVBLGVBQWVJLGFBQWEsQ0FBQ2IsR0FBRyxFQUFFO0VBQ2hDLE1BQU1DLFFBQVEsR0FBRyxNQUFNQyxLQUFLLENBQUMsK0JBQStCLEVBQUU7SUFDMURDLE1BQU0sRUFBRSxNQUFNO0lBQ2RDLE9BQU8sRUFBRTtNQUNQLGNBQWMsRUFBRTtJQUNsQixD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","map":{"version":3,"names":["express","require","mercadopago","postgraphile","userDb","userPass","host","database","ConfirmaCarrito","dni","response","fetch","method","headers","body","JSON","stringify","query","respuesta","json","console","log","ConfirmaVenta","getDataUser","email","data","usuarioByEmail","MySchemaCategoriasPlugins","app","post","req","res","notificar","configure","access_token","payment","topic","type","paymentId","id","findById","items","additional_info","status","metadata","id_user","err","use","watchPg","graphiql","enableCors","enhanceGraphiql","showErrorStack","appendPlugins","main","port","listen"],"sourceRoot":"/home/alex/FunkoCdelU_App/Backend/","sources":["index.js"],"sourcesContent":["const express = require(\"express\");\nconst mercadopago = require(\"mercadopago\")\nconst { postgraphile } = require(\"postgraphile\");\n\n\nconst userDb = \"alex\";\nconst userPass = 1234;\nconst host = \"localhost\";\nconst database = \"BBDD_Funko\";\n\nasync function ConfirmaCarrito(dni) {\n  const response = await fetch('http://localhost:5000/graphql', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          query: `mutation {\n              confirmarComprarDelCarrito(input: {dniUser: ${dni}}) {\n                clientMutationId\n              }\n            }\n            \n            `\n      }),\n    })\n\n    const respuesta = await response.json()\n    console.log(respuesta)\n\n}\n\nasync function ConfirmaVenta(dni) {\n  const response = await fetch('http://localhost:5000/graphql', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          query: `mutation {\n              confirmarEstadoDeVenta(input: {dni: ${dni}}) {\n                clientMutationId\n              }\n            }\n            \n            `\n      }),\n    })\n\n    const respuesta = await response.json()\n    console.log(respuesta)\n\n}\n\n\nasync function getDataUser(email) {\n  const response = await fetch('http://localhost:5000/graphql', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          query: `query MyQuery {\n              usuarioByEmail(email: \"${email}\") {\n                dni\n              }\n            }\n            \n            `\n      }),\n    })\n\n    const respuesta = await response.json()\n    return respuesta.data.usuarioByEmail;\n\n}\n\n\n/*1Backend 2 ngrok=port 5000 */\nconst {\n  MySchemaCategoriasPlugins,\n} = require(\"./Schemas/Categorias/Categorias.js\");\nconst app = express();\n\n\n\napp.post(\"/notificar\", async (req, res) => {\n  await notificar(req, res);\n});\n\nconst notificar = async (req, res) => {\n  try {\n    mercadopago.configure({\n      access_token:\n        \"TEST-5873713881795945-030921-d57166b7b2e69778a0aee6a8bca9190b-1327386578\",\n    });\n\n    const { query } = req;\n\n    let payment;\n\n    const topic = query.topic || query.type;\n\n    if (topic == \"payment\") {\n      const paymentId = query.id || query[\"data.id\"];\n      payment = await mercadopago.payment.findById(paymentId);\n\n      \n      console.log(payment)\n      const items = payment.body.additional_info.items;\n      const status = payment.body.status;\n      const email = payment.body.metadata.id_user;\n      console.log(status,paymentId)\n      \n      /* TODO: Buscar como ver los pagos anteriores */\n       /*FUnciones bases de datos */\n       /*if (status === \"approved\") {\n        const data_user = await getDataUser(email)\n        console.log(data_user.dni)  \n        console.log(\"Carritoooo\")\n        await ConfirmaCarrito(data_user.dni)\n        console.log(\"VENTAAAAA\")   \n        await ConfirmaVenta(data_user.dni) \n      }\n      else{\n        console.log(\"Compra no aprovada\")\n      }\n     */\n      \n      res.status(200);\n    } else {\n      res.status(400);\n    }\n  } catch (err) {\n    console.log(err);\n    return err;\n  }\n};\n\napp.use(\n  postgraphile(\n    `postgres://${userDb}:${userPass}@${host}/${database}` ||\n      \"postgres://postgres:postgres@127.0.0.1:5432/name-databases\",\n    [\"public\"],\n    {\n      watchPg: true,\n      graphiql: true,\n      enableCors: true,\n      enhanceGraphiql: true,\n      showErrorStack: true,\n      appendPlugins: [MySchemaCategoriasPlugins],\n    }\n  )\n);\n\nconst main = async () => {\n  const port = 5000;\n  await app.listen(port);\n  console.log(`Conectado pa http://localhost:${port}/graphiql`);\n};\n\nmain();\n"],"mappings":"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"}},"mtime":1678550555371},"{\"assumptions\":{},\"sourceRoot\":\"/home/alex/FunkoCdelU_App/Backend/Schemas/Categorias/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alex/FunkoCdelU_App/Backend\",\"filename\":\"/home/alex/FunkoCdelU_App/Backend/Schemas/Categorias/Categorias.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alex/FunkoCdelU_App/Backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.19.3:development":{"value":{"code":"const {\n  makeExtendSchemaPlugin,\n  gql\n} = require(\"graphile-utils\");\nconst MySchemaCategoriasPlugins = makeExtendSchemaPlugin(build => {\n  const {\n    pgSql: sql\n  } = build;\n  return {\n    typeDefs: gql`\n  \n      extend type Query {\n          # Individual record\n          randomCategoria: Categoria\n  \n          # List record\n          randomCategoriaList: [Categoria!]\n        }\n      `,\n    resolvers: {\n      Query: {\n        /*\n         * Individual record needs to return just one row but\n         * `selectGraphQLResultFromTable` always returns an array; so the\n         * resolver is responsible for turning the array into a single record.\n         */\n        randomCategoria: async (_query, args, context, resolveInfo) => {\n          // Remember: resolveInfo.graphile.selectGraphQLResultFromTable is where the PostGraphile\n          // look-ahead magic happens!\n          const rows = await resolveInfo.graphile.selectGraphQLResultFromTable(sql.fragment`public.categoria`, (tableAlias, queryBuilder) => {\n            queryBuilder.orderBy(sql.fragment`random()`);\n            queryBuilder.limit(1);\n          });\n          return rows[0];\n        },\n        /*\n         * Connection and list resolvers are identical; PostGraphile handles\n         * the complexities for you. We've simplified these down to a direct\n         * call to `selectGraphQLResultFromTable` but you may wish to wrap this\n         * with additional logic.\n         */\n        randomCategoriaList: (_query, args, context, resolveInfo) => resolveInfo.graphile.selectGraphQLResultFromTable(sql.fragment`public.categoria`, (tableAlias, queryBuilder) => {\n          queryBuilder.orderBy(sql.fragment`random()`);\n        })\n      }\n    }\n  };\n});\nmodule.exports = {\n  MySchemaCategoriasPlugins\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWtlRXh0ZW5kU2NoZW1hUGx1Z2luIiwiZ3FsIiwicmVxdWlyZSIsIk15U2NoZW1hQ2F0ZWdvcmlhc1BsdWdpbnMiLCJidWlsZCIsInBnU3FsIiwic3FsIiwidHlwZURlZnMiLCJyZXNvbHZlcnMiLCJRdWVyeSIsInJhbmRvbUNhdGVnb3JpYSIsIl9xdWVyeSIsImFyZ3MiLCJjb250ZXh0IiwicmVzb2x2ZUluZm8iLCJyb3dzIiwiZ3JhcGhpbGUiLCJzZWxlY3RHcmFwaFFMUmVzdWx0RnJvbVRhYmxlIiwiZnJhZ21lbnQiLCJ0YWJsZUFsaWFzIiwicXVlcnlCdWlsZGVyIiwib3JkZXJCeSIsImxpbWl0IiwicmFuZG9tQ2F0ZWdvcmlhTGlzdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2FsZXgvRnVua29DZGVsVV9BcHAvQmFja2VuZC9TY2hlbWFzL0NhdGVnb3JpYXMvIiwic291cmNlcyI6WyJDYXRlZ29yaWFzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgbWFrZUV4dGVuZFNjaGVtYVBsdWdpbiwgZ3FsIH0gPSByZXF1aXJlKFwiZ3JhcGhpbGUtdXRpbHNcIik7XG5cblxuY29uc3QgIE15U2NoZW1hQ2F0ZWdvcmlhc1BsdWdpbnMgPSBtYWtlRXh0ZW5kU2NoZW1hUGx1Z2luKGJ1aWxkID0+IHtcbiAgICBjb25zdCB7IHBnU3FsOiBzcWwgfSA9IGJ1aWxkO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlRGVmczogZ3FsYFxuICBcbiAgICAgIGV4dGVuZCB0eXBlIFF1ZXJ5IHtcbiAgICAgICAgICAjIEluZGl2aWR1YWwgcmVjb3JkXG4gICAgICAgICAgcmFuZG9tQ2F0ZWdvcmlhOiBDYXRlZ29yaWFcbiAgXG4gICAgICAgICAgIyBMaXN0IHJlY29yZFxuICAgICAgICAgIHJhbmRvbUNhdGVnb3JpYUxpc3Q6IFtDYXRlZ29yaWEhXVxuICAgICAgICB9XG4gICAgICBgLFxuICAgICAgcmVzb2x2ZXJzOiB7XG4gICAgICAgIFF1ZXJ5OiB7XG4gICAgICAgICAgLypcbiAgICAgICAgICAgKiBJbmRpdmlkdWFsIHJlY29yZCBuZWVkcyB0byByZXR1cm4ganVzdCBvbmUgcm93IGJ1dFxuICAgICAgICAgICAqIGBzZWxlY3RHcmFwaFFMUmVzdWx0RnJvbVRhYmxlYCBhbHdheXMgcmV0dXJucyBhbiBhcnJheTsgc28gdGhlXG4gICAgICAgICAgICogcmVzb2x2ZXIgaXMgcmVzcG9uc2libGUgZm9yIHR1cm5pbmcgdGhlIGFycmF5IGludG8gYSBzaW5nbGUgcmVjb3JkLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHJhbmRvbUNhdGVnb3JpYTogYXN5bmMgKF9xdWVyeSwgYXJncywgY29udGV4dCwgcmVzb2x2ZUluZm8pID0+IHtcbiAgICAgICAgICAgIC8vIFJlbWVtYmVyOiByZXNvbHZlSW5mby5ncmFwaGlsZS5zZWxlY3RHcmFwaFFMUmVzdWx0RnJvbVRhYmxlIGlzIHdoZXJlIHRoZSBQb3N0R3JhcGhpbGVcbiAgICAgICAgICAgIC8vIGxvb2stYWhlYWQgbWFnaWMgaGFwcGVucyFcbiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBhd2FpdCByZXNvbHZlSW5mby5ncmFwaGlsZS5zZWxlY3RHcmFwaFFMUmVzdWx0RnJvbVRhYmxlKFxuICAgICAgICAgICAgICBzcWwuZnJhZ21lbnRgcHVibGljLmNhdGVnb3JpYWAsXG4gICAgICAgICAgICAgICh0YWJsZUFsaWFzLCBxdWVyeUJ1aWxkZXIpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIub3JkZXJCeShzcWwuZnJhZ21lbnRgcmFuZG9tKClgKTtcbiAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIubGltaXQoMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gcm93c1swXTtcbiAgICAgICAgICB9LFxuICBcbiAgICAgICAgICAvKlxuICAgICAgICAgICAqIENvbm5lY3Rpb24gYW5kIGxpc3QgcmVzb2x2ZXJzIGFyZSBpZGVudGljYWw7IFBvc3RHcmFwaGlsZSBoYW5kbGVzXG4gICAgICAgICAgICogdGhlIGNvbXBsZXhpdGllcyBmb3IgeW91LiBXZSd2ZSBzaW1wbGlmaWVkIHRoZXNlIGRvd24gdG8gYSBkaXJlY3RcbiAgICAgICAgICAgKiBjYWxsIHRvIGBzZWxlY3RHcmFwaFFMUmVzdWx0RnJvbVRhYmxlYCBidXQgeW91IG1heSB3aXNoIHRvIHdyYXAgdGhpc1xuICAgICAgICAgICAqIHdpdGggYWRkaXRpb25hbCBsb2dpYy5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICByYW5kb21DYXRlZ29yaWFMaXN0OiAoX3F1ZXJ5LCBhcmdzLCBjb250ZXh0LCByZXNvbHZlSW5mbykgPT5cbiAgICAgICAgICAgIHJlc29sdmVJbmZvLmdyYXBoaWxlLnNlbGVjdEdyYXBoUUxSZXN1bHRGcm9tVGFibGUoXG4gICAgICAgICAgICAgIHNxbC5mcmFnbWVudGBwdWJsaWMuY2F0ZWdvcmlhYCxcbiAgICAgICAgICAgICAgKHRhYmxlQWxpYXMsIHF1ZXJ5QnVpbGRlcikgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5vcmRlckJ5KHNxbC5mcmFnbWVudGByYW5kb20oKWApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApLFxuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH0pO1xuICBcbiAgbW9kdWxlLmV4cG9ydHMgPSB7TXlTY2hlbWFDYXRlZ29yaWFzUGx1Z2luc307Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBLHNCQUFzQjtFQUFFQztBQUFJLENBQUMsR0FBR0MsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBR2pFLE1BQU9DLHlCQUF5QixHQUFHSCxzQkFBc0IsQ0FBQ0ksS0FBSyxJQUFJO0VBQy9ELE1BQU07SUFBRUMsS0FBSyxFQUFFQztFQUFJLENBQUMsR0FBR0YsS0FBSztFQUM1QixPQUFPO0lBQ0xHLFFBQVEsRUFBRU4sR0FBSTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztJQUNETyxTQUFTLEVBQUU7TUFDVEMsS0FBSyxFQUFFO1FBQ0w7QUFDVjtBQUNBO0FBQ0E7QUFDQTtRQUNVQyxlQUFlLEVBQUUsT0FBT0MsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLE9BQU8sRUFBRUMsV0FBVyxLQUFLO1VBQzdEO1VBQ0E7VUFDQSxNQUFNQyxJQUFJLEdBQUcsTUFBTUQsV0FBVyxDQUFDRSxRQUFRLENBQUNDLDRCQUE0QixDQUNsRVgsR0FBRyxDQUFDWSxRQUFTLGtCQUFpQixFQUM5QixDQUFDQyxVQUFVLEVBQUVDLFlBQVksS0FBSztZQUM1QkEsWUFBWSxDQUFDQyxPQUFPLENBQUNmLEdBQUcsQ0FBQ1ksUUFBUyxVQUFTLENBQUM7WUFDNUNFLFlBQVksQ0FBQ0UsS0FBSyxDQUFDLENBQUMsQ0FBQztVQUN2QixDQUFDLENBQ0Y7VUFDRCxPQUFPUCxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2hCLENBQUM7UUFFRDtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7UUFDVVEsbUJBQW1CLEVBQUUsQ0FBQ1osTUFBTSxFQUFFQyxJQUFJLEVBQUVDLE9BQU8sRUFBRUMsV0FBVyxLQUN0REEsV0FBVyxDQUFDRSxRQUFRLENBQUNDLDRCQUE0QixDQUMvQ1gsR0FBRyxDQUFDWSxRQUFTLGtCQUFpQixFQUM5QixDQUFDQyxVQUFVLEVBQUVDLFlBQVksS0FBSztVQUM1QkEsWUFBWSxDQUFDQyxPQUFPLENBQUNmLEdBQUcsQ0FBQ1ksUUFBUyxVQUFTLENBQUM7UUFDOUMsQ0FBQztNQUVQO0lBQ0Y7RUFDRixDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUZNLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQUN0QjtBQUF5QixDQUFDIn0=","map":{"version":3,"names":["makeExtendSchemaPlugin","gql","require","MySchemaCategoriasPlugins","build","pgSql","sql","typeDefs","resolvers","Query","randomCategoria","_query","args","context","resolveInfo","rows","graphile","selectGraphQLResultFromTable","fragment","tableAlias","queryBuilder","orderBy","limit","randomCategoriaList","module","exports"],"sourceRoot":"/home/alex/FunkoCdelU_App/Backend/Schemas/Categorias/","sources":["Categorias.js"],"sourcesContent":["const { makeExtendSchemaPlugin, gql } = require(\"graphile-utils\");\n\n\nconst  MySchemaCategoriasPlugins = makeExtendSchemaPlugin(build => {\n    const { pgSql: sql } = build;\n    return {\n      typeDefs: gql`\n  \n      extend type Query {\n          # Individual record\n          randomCategoria: Categoria\n  \n          # List record\n          randomCategoriaList: [Categoria!]\n        }\n      `,\n      resolvers: {\n        Query: {\n          /*\n           * Individual record needs to return just one row but\n           * `selectGraphQLResultFromTable` always returns an array; so the\n           * resolver is responsible for turning the array into a single record.\n           */\n          randomCategoria: async (_query, args, context, resolveInfo) => {\n            // Remember: resolveInfo.graphile.selectGraphQLResultFromTable is where the PostGraphile\n            // look-ahead magic happens!\n            const rows = await resolveInfo.graphile.selectGraphQLResultFromTable(\n              sql.fragment`public.categoria`,\n              (tableAlias, queryBuilder) => {\n                queryBuilder.orderBy(sql.fragment`random()`);\n                queryBuilder.limit(1);\n              }\n            );\n            return rows[0];\n          },\n  \n          /*\n           * Connection and list resolvers are identical; PostGraphile handles\n           * the complexities for you. We've simplified these down to a direct\n           * call to `selectGraphQLResultFromTable` but you may wish to wrap this\n           * with additional logic.\n           */\n          randomCategoriaList: (_query, args, context, resolveInfo) =>\n            resolveInfo.graphile.selectGraphQLResultFromTable(\n              sql.fragment`public.categoria`,\n              (tableAlias, queryBuilder) => {\n                queryBuilder.orderBy(sql.fragment`random()`);\n              }\n            ),\n        }\n      },\n    };\n  });\n  \n  module.exports = {MySchemaCategoriasPlugins};"],"mappings":"AAAA,MAAM;EAAEA,sBAAsB;EAAEC;AAAI,CAAC,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AAGjE,MAAOC,yBAAyB,GAAGH,sBAAsB,CAACI,KAAK,IAAI;EAC/D,MAAM;IAAEC,KAAK,EAAEC;EAAI,CAAC,GAAGF,KAAK;EAC5B,OAAO;IACLG,QAAQ,EAAEN,GAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;IACDO,SAAS,EAAE;MACTC,KAAK,EAAE;QACL;AACV;AACA;AACA;AACA;QACUC,eAAe,EAAE,OAAOC,MAAM,EAAEC,IAAI,EAAEC,OAAO,EAAEC,WAAW,KAAK;UAC7D;UACA;UACA,MAAMC,IAAI,GAAG,MAAMD,WAAW,CAACE,QAAQ,CAACC,4BAA4B,CAClEX,GAAG,CAACY,QAAS,kBAAiB,EAC9B,CAACC,UAAU,EAAEC,YAAY,KAAK;YAC5BA,YAAY,CAACC,OAAO,CAACf,GAAG,CAACY,QAAS,UAAS,CAAC;YAC5CE,YAAY,CAACE,KAAK,CAAC,CAAC,CAAC;UACvB,CAAC,CACF;UACD,OAAOP,IAAI,CAAC,CAAC,CAAC;QAChB,CAAC;QAED;AACV;AACA;AACA;AACA;AACA;QACUQ,mBAAmB,EAAE,CAACZ,MAAM,EAAEC,IAAI,EAAEC,OAAO,EAAEC,WAAW,KACtDA,WAAW,CAACE,QAAQ,CAACC,4BAA4B,CAC/CX,GAAG,CAACY,QAAS,kBAAiB,EAC9B,CAACC,UAAU,EAAEC,YAAY,KAAK;UAC5BA,YAAY,CAACC,OAAO,CAACf,GAAG,CAACY,QAAS,UAAS,CAAC;QAC9C,CAAC;MAEP;IACF;EACF,CAAC;AACH,CAAC,CAAC;AAEFM,MAAM,CAACC,OAAO,GAAG;EAACtB;AAAyB,CAAC"}},"mtime":1665494206423}}